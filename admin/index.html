<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LiveGigs Asia 后台管理</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
            background: #1a1a1a;
            color: #c0c0c0;
            min-height: 100vh;
        }

        /* 登录页面 */
        .login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #050505 0%, #1a1a1a 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .login-screen.hidden {
            display: none;
        }

        .login-logo {
            font-size: 48px;
            color: #8b0000;
            margin-bottom: 40px;
            text-shadow: 0 0 20px rgba(139, 0, 0, 0.5);
        }

        .login-form {
            background: rgba(192, 192, 192, 0.1);
            padding: 40px;
            border-radius: 10px;
            border: 2px solid #8b0000;
            width: 90%;
            max-width: 400px;
        }

        .login-form input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: #050505;
            border: 1px solid #c0c0c0;
            color: #c0c0c0;
            font-size: 16px;
            font-family: inherit;
        }

        .login-form input:focus {
            outline: none;
            border-color: #8b0000;
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background: #8b0000;
            color: #c0c0c0;
            border: none;
            font-size: 18px;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s;
        }

        .login-btn:hover {
            background: #a00000;
            transform: translateY(-2px);
        }

        .login-error {
            color: #ff4444;
            text-align: center;
            margin-top: 10px;
            display: none;
        }

        /* 主界面 */
        .admin-container {
            display: none;
            min-height: 100vh;
        }

        .admin-container.active {
            display: flex;
        }

        /* 侧边栏 */
        .sidebar {
            width: 280px;
            background: #0a0a0a;
            border-right: 3px solid #8b0000;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 30px 20px;
            background: linear-gradient(180deg, #8b0000 0%, #050505 100%);
            text-align: center;
        }

        .sidebar-title {
            font-size: 24px;
            color: #c0c0c0;
            letter-spacing: 2px;
        }

        .sidebar-subtitle {
            font-size: 12px;
            color: #8b0000;
            margin-top: 5px;
        }

        .nav-menu {
            padding: 20px 0;
        }

        .nav-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
            font-size: 14px;
            letter-spacing: 1px;
        }

        .nav-item:hover {
            background: rgba(139, 0, 0, 0.2);
            border-left-color: #8b0000;
        }

        .nav-item.active {
            background: rgba(139, 0, 0, 0.3);
            border-left-color: #8b0000;
            color: #fff;
        }

        .nav-section-title {
            padding: 20px 25px 10px;
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* 主内容区 */
        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 30px;
            background: #d0d0d0;
            min-height: 100vh;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #8b0000;
        }

        .content-title {
            font-size: 32px;
            color: #050505;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            font-family: inherit;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: #8b0000;
            color: #c0c0c0;
        }

        .btn-primary:hover {
            background: #a00000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.3);
        }

        .btn-secondary {
            background: #050505;
            color: #c0c0c0;
        }

        .btn-warning {
            background: #ffaa00;
            color: #050505;
        }

        .btn-success {
            background: #00aa44;
            color: #fff;
        }

        .sync-status {
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sync-status.synced {
            background: rgba(0, 170, 68, 0.2);
            color: #00aa44;
            border: 1px solid #00aa44;
        }

        .sync-status.unsynced {
            background: rgba(255, 170, 0, 0.2);
            color: #ff8800;
            border: 1px solid #ff8800;
        }

        /* 内容区域 */
        .content-section {
            display: none;
            animation: fadeIn 0.3s;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 表单样式 */
        .form-group {
            background: #c0c0c0;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid #999;
        }

        .form-title {
            font-size: 20px;
            color: #8b0000;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #8b0000;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 15px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
        }

        .form-field label {
            font-size: 12px;
            color: #050505;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-field input,
        .form-field textarea,
        .form-field select {
            padding: 12px;
            background: #fff;
            border: 2px solid #999;
            font-family: inherit;
            font-size: 14px;
            color: #050505;
        }

        .form-field input:focus,
        .form-field textarea:focus,
        .form-field select:focus {
            outline: none;
            border-color: #8b0000;
        }

        .form-field small {
            font-size: 11px;
            color: #666;
            margin-top: 5px;
        }

        /* 项目列表 */
        .items-list {
            margin-top: 20px;
        }

        .item-card {
            background: #e0e0e0;
            border: 2px solid #999;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .item-title {
            font-size: 16px;
            color: #8b0000;
        }

        .item-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 5px 12px;
            font-size: 11px;
        }

        .btn-danger {
            background: #cc0000;
            color: #fff;
        }

        /* 标签页 */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #999;
        }

        .tab {
            padding: 12px 25px;
            background: transparent;
            border: none;
            font-family: inherit;
            font-size: 14px;
            color: #666;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab:hover {
            color: #8b0000;
        }

        .tab.active {
            color: #8b0000;
            border-bottom-color: #8b0000;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* 提示信息 */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            background: #050505;
            color: #c0c0c0;
            border-left: 4px solid #8b0000;
            border-radius: 5px;
            display: none;
            z-index: 9999;
        }

        .toast.show {
            display: block;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* 响应式 */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
                height: auto;
            }
            .main-content {
                margin-left: 0;
            }
            .admin-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- 登录界面 -->
    <div class="login-screen" id="loginScreen">
        <div class="login-logo">LIVEGIGS ASIA ADMIN</div>
        <div class="login-form">
            <input type="text" id="username" placeholder="用户名" value="admin">
            <input type="password" id="password" placeholder="密码">
            <button class="login-btn" onclick="login()">登录</button>
            <div class="login-error" id="loginError">用户名或密码错误</div>
        </div>
    </div>

    <!-- 主管理界面 -->
    <div class="admin-container" id="adminContainer">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">LIVEGIGS ASIA</div>
                <div class="sidebar-subtitle">后台管理系统</div>
            </div>

            <nav class="nav-menu">
                <div class="nav-section-title">Dashboard</div>
                <div class="nav-item active" onclick="showSection('banners')">1. BANNER管理</div>
                <div class="nav-item" onclick="showSection('posters')">2. 海报管理</div>
                <div class="nav-item" onclick="showSection('events')">3. 自主活动</div>
                <div class="nav-item" onclick="showSection('carousel')">4. 滚播活动</div>
                <div class="nav-item" onclick="showSection('footer')">5. 底部管理</div>
                <div class="nav-item" onclick="showSection('partners')">6. 合作伙伴</div>

                <div class="nav-section-title" style="margin-top: 30px;">系统</div>
                <div class="nav-item" onclick="logout()">退出登录</div>
            </nav>
        </aside>

        <!-- 主内容 -->
        <main class="main-content">
            <!-- Banner管理 -->
            <section class="content-section active" id="section-banners">
                <div class="content-header">
                    <h1 class="content-title">BANNER管理</h1>
                    <div class="header-actions">
                        <div class="sync-status unsynced" id="bannerSyncStatus">
                            <span>●</span> 未同步
                        </div>
                        <button class="btn btn-primary" onclick="syncToGitHub('banners')">同步到GitHub</button>
                        <button class="btn btn-secondary" onclick="addBanner()">+ 添加Banner</button>
                    </div>
                </div>

                <div class="form-group">
                    <div class="form-title">Banner列表（Index + CN 同步更新，最多5个）</div>
                    <div id="bannersList">
                        <!-- 动态生成 -->
                    </div>
                </div>
            </section>

            <!-- 海报管理 -->
            <section class="content-section" id="section-posters">
                <div class="content-header">
                    <h1 class="content-title">海报管理</h1>
                    <div class="header-actions">
                        <div class="sync-status unsynced" id="posterSyncStatus">
                            <span>●</span> 未同步
                        </div>
                        <button class="btn btn-primary" onclick="syncToGitHub('posters')">同步到GitHub</button>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="switchPosterTab('index')">Index页面</button>
                    <button class="tab" onclick="switchPosterTab('cn')">CN页面</button>
                    <button class="tab" onclick="switchPosterTab('events')">Events页面</button>
                </div>

                <div class="tab-content active" id="poster-tab-index">
                    <div class="form-group">
                        <div class="form-title">Index页面 - 3个海报区域</div>
                        <div id="indexPostersList"></div>
                    </div>
                </div>

                <div class="tab-content" id="poster-tab-cn">
                    <div class="form-group">
                        <div class="form-title">CN页面 - 3个海报区域（独立配置）</div>
                        <div id="cnPostersList"></div>
                    </div>
                </div>

                <div class="tab-content" id="poster-tab-events">
                    <div class="form-group">
                        <div class="form-title">Events页面 - 海报2支持轮播（1-5个）</div>
                        <div id="eventsPostersList"></div>
                    </div>
                </div>
            </section>

            <!-- 底部管理 -->
            <section class="content-section" id="section-footer">
                <div class="content-header">
                    <h1 class="content-title">底部管理</h1>
                    <div class="header-actions">
                        <div class="sync-status unsynced" id="footerSyncStatus">
                            <span>●</span> 未同步
                        </div>
                        <button class="btn btn-primary" onclick="syncToGitHub('footer')">同步到GitHub</button>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="switchFooterTab('global')">海外站底部（Global）</button>
                    <button class="tab" onclick="switchFooterTab('cn')">国内站底部（CN）</button>
                </div>

                <div class="tab-content active" id="footer-tab-global">
                    <div class="form-group">
                        <div class="form-title">海外站底部（Index/Events/Partners/Privacy/Accessibility 共用）</div>
                        <div id="globalFooterForm"></div>
                    </div>
                </div>

                <div class="tab-content" id="footer-tab-cn">
                    <div class="form-group">
                        <div class="form-title">国内站底部（CN页面独立）</div>
                        <div id="cnFooterForm"></div>
                    </div>
                </div>
            </section>

            <!-- 其他区域提示 -->
            <section class="content-section" id="section-events">
                <div class="content-header">
                    <h1 class="content-title">自主活动</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="alert('请先完成基础配置')">同步到GitHub</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-title">功能开发中</div>
                    <p>请先完成Banner、海报、底部的配置同步。</p>
                </div>
            </section>

            <section class="content-section" id="section-carousel">
                <div class="content-header">
                    <h1 class="content-title">滚播活动</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="alert('请先完成基础配置')">同步到GitHub</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-title">功能开发中</div>
                    <p>请先完成Banner、海报、底部的配置同步。</p>
                </div>
            </section>

            <section class="content-section" id="section-partners">
                <div class="content-header">
                    <h1 class="content-title">合作伙伴</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="alert('请先完成基础配置')">同步到GitHub</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-title">功能开发中</div>
                    <p>请先完成Banner、海报、底部的配置同步。</p>
                </div>
            </section>
        </main>
    </div>

    <!-- 提示 -->
    <div class="toast" id="toast"></div>

    <script>
        // 数据存储
        let appData = {
            banners: { banners: [] },
            indexPosters: { posters: [{},{},{}] },
            cnPosters: { posters: [{},{},{}] },
            eventsPosters: { posters: [{},{},{}] },
            footerGlobal: {
                siteName: "LIVEGIGS",
                siteSub: "ASIA",
                contactText: "CONTACT US",
                email: "LiveGigsCn@Hotmail.Com",
                phone: "+852-456-7890",
                address: "#303 TERRY FRANCINE STREET,\nHONGKONG, CN 999077",
                copyright: "Copyright © 2001-2026 EMANON ENT. - All Rights Reserved.",
                producerLogo: "./image/emanonent-logo.png",
                social: [
                    {name: "Facebook", icon: "facebook", link: "https://facebook.com/livegigsasia"},
                    {name: "Instagram", icon: "instagram", link: "https://instagram.com/livegigsasia"},
                    {name: "YouTube", icon: "youtube", link: "https://youtube.com/livegigsasia"},
                    {name: "X", icon: "x", link: "https://x.com/livegigsasia"}
                ]
            },
            footerCN: {
                siteName: "LIVEGIGS",
                siteSub: "CN",
                contactText: "联系我们",
                email: "LiveGigsCn@Hotmail.Com",
                phone: "+852-456-7890",
                address: "香港 | 上海 | 北京",
                copyright: "Copyright © 2001-2026 EMANON ENT. - All Rights Reserved.",
                producerLogo: "./image/emanonent-logo.png",
                social: [
                    {name: "微博", icon: "weibo", link: "https://weibo.com/livegigs"},
                    {name: "微信", icon: "wechat", link: ""},
                    {name: "小红书", icon: "xiaohongshu", link: "https://xiaohongshu.com/livegigs"},
                    {name: "小程序", icon: "miniprogram", link: ""},
                    {name: "YouTube", icon: "youtube", link: "https://youtube.com/livegigsasia"},
                    {name: "Instagram", icon: "instagram", link: "https://instagram.com/livegigsasia"}
                ]
            }
        };

        // 登录状态
        let isLoggedIn = false;
        let lastActivity = Date.now();

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
            setupActivityTracking();
        });

        // 检查登录状态
        function checkLoginStatus() {
            const session = localStorage.getItem('adminSession');
            if (session) {
                const sessionData = JSON.parse(session);
                if (Date.now() - sessionData.timestamp < 30 * 60 * 1000) {
                    showAdminPanel();
                    loadAllData();
                } else {
                    localStorage.removeItem('adminSession');
                }
            }
        }

        // 登录
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username === 'admin' && password === '00123456a') {
                localStorage.setItem('adminSession', JSON.stringify({
                    username: username,
                    timestamp: Date.now()
                }));
                showAdminPanel();
                loadAllData();
                showToast('登录成功');
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        }

        // 显示管理面板
        function showAdminPanel() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('adminContainer').classList.add('active');
            isLoggedIn = true;
        }

        // 退出
        function logout() {
            localStorage.removeItem('adminSession');
            location.reload();
        }

        // 活动跟踪（30分钟超时）
        function setupActivityTracking() {
            document.addEventListener('click', updateActivity);
            document.addEventListener('keypress', updateActivity);

            setInterval(() => {
                if (isLoggedIn && Date.now() - lastActivity > 30 * 60 * 1000) {
                    alert('会话已过期，请重新登录');
                    logout();
                }
            }, 60000);
        }

        function updateActivity() {
            lastActivity = Date.now();
        }

        // 显示区域
        function showSection(sectionName) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

            document.getElementById('section-' + sectionName).classList.add('active');
            event.target.classList.add('active');

            // 刷新数据
            if (sectionName === 'banners') renderBannersList();
            if (sectionName === 'posters') renderPostersList('index');
            if (sectionName === 'footer') renderFooterForm('global');
        }

        // 加载所有数据
        function loadAllData() {
            renderBannersList();
            renderPostersList('index');
            renderFooterForm('global');
        }

        // ===== Banner管理 =====
        function renderBannersList() {
            const container = document.getElementById('bannersList');
            let html = '';

            appData.banners.banners.forEach((banner, index) => {
                html += `
                    <div class="item-card">
                        <div class="item-header">
                            <span class="item-title">Banner ${index + 1}</span>
                            <div class="item-actions">
                                <button class="btn btn-small btn-danger" onclick="deleteBanner(${index})">删除</button>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>图片地址</label>
                                <input type="text" value="${banner.image || ''}" onchange="updateBanner(${index}, 'image', this.value)" placeholder="./image/banner.jpg">
                            </div>
                            <div class="form-field">
                                <label>标题（支持HTML）</label>
                                <input type="text" value="${banner.title || ''}" onchange="updateBanner(${index}, 'title', this.value)" placeholder="CONCERTS...">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>按钮文字</label>
                                <input type="text" value="${banner.buttonText || ''}" onchange="updateBanner(${index}, 'buttonText', this.value)" placeholder="VIEW MORE">
                            </div>
                            <div class="form-field">
                                <label>按钮链接</label>
                                <input type="text" value="${banner.buttonLink || ''}" onchange="updateBanner(${index}, 'buttonLink', this.value)" placeholder="https://...">
                            </div>
                        </div>
                    </div>
                `;
            });

            if (appData.banners.banners.length === 0) {
                html = '<p style="color: #666; text-align: center; padding: 40px;">暂无Banner，请点击"添加Banner"</p>';
            }

            container.innerHTML = html;
        }

        function addBanner() {
            if (appData.banners.banners.length >= 5) {
                showToast('最多只能添加5个Banner');
                return;
            }
            appData.banners.banners.push({
                image: '',
                title: '',
                buttonText: '',
                buttonLink: ''
            });
            renderBannersList();
            markUnsynced('banner');
        }

        function deleteBanner(index) {
            if (confirm('确定删除这个Banner吗？')) {
                appData.banners.banners.splice(index, 1);
                renderBannersList();
                markUnsynced('banner');
            }
        }

        function updateBanner(index, field, value) {
            appData.banners.banners[index][field] = value;
            markUnsynced('banner');
        }

        // ===== 海报管理 =====
        function switchPosterTab(tab) {
            document.querySelectorAll('#section-posters .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#section-posters .tab-content').forEach(t => t.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById('poster-tab-' + tab).classList.add('active');

            renderPostersList(tab);
        }

        function renderPostersList(type) {
            const containerMap = {
                'index': 'indexPostersList',
                'cn': 'cnPostersList',
                'events': 'eventsPostersList'
            };
            const dataMap = {
                'index': 'indexPosters',
                'cn': 'cnPosters',
                'events': 'eventsPosters'
            };

            const container = document.getElementById(containerMap[type]);
            const data = appData[dataMap[type]];

            let html = '';
            data.posters.forEach((poster, index) => {
                const isPoster2 = index === 1;
                const posterLabel = index === 0 ? '海报1（左侧）' : index === 1 ? '海报2（中间' + (type === 'events' ? ' - 支持轮播' : '') + '）' : '海报3（右侧）';

                html += `
                    <div class="item-card">
                        <div class="item-header">
                            <span class="item-title">${posterLabel}</span>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>图片地址</label>
                                <input type="text" value="${poster.image || ''}" onchange="updatePoster('${type}', ${index}, 'image', this.value)" placeholder="./image/poster.jpg">
                            </div>
                            <div class="form-field">
                                <label>标题（留空不显示）</label>
                                <input type="text" value="${poster.title || ''}" onchange="updatePoster('${type}', ${index}, 'title', this.value)">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-field">
                                <label>按钮文字（留空不显示）</label>
                                <input type="text" value="${poster.buttonText || ''}" onchange="updatePoster('${type}', ${index}, 'buttonText', this.value)">
                            </div>
                            <div class="form-field">
                                <label>按钮链接</label>
                                <input type="text" value="${poster.buttonLink || ''}" onchange="updatePoster('${type}', ${index}, 'buttonLink', this.value)" placeholder="https://...">
                            </div>
                        </div>
                `;

                // Events页面的海报2支持轮播
                if (type === 'events' && isPoster2) {
                    html += `
                        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #999;">
                            <div style="font-size: 12px; color: #8b0000; margin-bottom: 10px;">轮播设置（最多5个，留空则不轮播）</div>
                            <div id="carousel-items-${index}">
                                ${renderCarouselItems(type, index)}
                            </div>
                            <button class="btn btn-small btn-secondary" onclick="addCarouselItem('${type}', ${index})" style="margin-top: 10px;">+ 添加轮播图</button>
                        </div>
                    `;
                }

                html += '</div>';
            });

            container.innerHTML = html;
        }

        function renderCarouselItems(type, posterIndex) {
            const data = appData.eventsPosters.posters[posterIndex].carousel || [];
            let html = '';

            data.forEach((item, idx) => {
                html += `
                    <div style="background: #d0d0d0; padding: 10px; margin-bottom: 10px; border-radius: 5px;">
                        <div style="display: flex; gap: 10px; margin-bottom: 5px;">
                            <input type="text" placeholder="图片" value="${item.image || ''}" onchange="updateCarouselItem(${posterIndex}, ${idx}, 'image', this.value)" style="flex: 1; padding: 8px;">
                            <input type="text" placeholder="标题" value="${item.title || ''}" onchange="updateCarouselItem(${posterIndex}, ${idx}, 'title', this.value)" style="flex: 1; padding: 8px;">
                            <button class="btn btn-small btn-danger" onclick="deleteCarouselItem(${posterIndex}, ${idx})">×</button>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" placeholder="按钮文字" value="${item.buttonText || ''}" onchange="updateCarouselItem(${posterIndex}, ${idx}, 'buttonText', this.value)" style="flex: 1; padding: 8px;">
                            <input type="text" placeholder="链接" value="${item.link || ''}" onchange="updateCarouselItem(${posterIndex}, ${idx}, 'link', this.value)" style="flex: 1; padding: 8px;">
                        </div>
                    </div>
                `;
            });

            return html;
        }

        function updatePoster(type, index, field, value) {
            const dataMap = {
                'index': 'indexPosters',
                'cn': 'cnPosters',
                'events': 'eventsPosters'
            };
            appData[dataMap[type]].posters[index][field] = value;
            markUnsynced('poster');
        }

        function addCarouselItem(type, posterIndex) {
            if (!appData.eventsPosters.posters[posterIndex].carousel) {
                appData.eventsPosters.posters[posterIndex].carousel = [];
            }
            if (appData.eventsPosters.posters[posterIndex].carousel.length >= 5) {
                showToast('最多5个轮播图');
                return;
            }
            appData.eventsPosters.posters[posterIndex].carousel.push({
                image: '', title: '', buttonText: '', link: ''
            });
            renderPostersList('events');
            markUnsynced('poster');
        }

        function updateCarouselItem(posterIndex, itemIndex, field, value) {
            appData.eventsPosters.posters[posterIndex].carousel[itemIndex][field] = value;
            markUnsynced('poster');
        }

        function deleteCarouselItem(posterIndex, itemIndex) {
            appData.eventsPosters.posters[posterIndex].carousel.splice(itemIndex, 1);
            renderPostersList('events');
            markUnsynced('poster');
        }

        // ===== 底部管理 =====
        function switchFooterTab(tab) {
            document.querySelectorAll('#section-footer .tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#section-footer .tab-content').forEach(t => t.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById('footer-tab-' + tab).classList.add('active');

            renderFooterForm(tab);
        }

        function renderFooterForm(type) {
            const isGlobal = type === 'global';
            const data = isGlobal ? appData.footerGlobal : appData.footerCN;
            const container = document.getElementById(isGlobal ? 'globalFooterForm' : 'cnFooterForm');

            container.innerHTML = `
                <div class="form-row">
                    <div class="form-field">
                        <label>站点名称（对应LIVEGIGS文字）</label>
                        <input type="text" value="${data.siteName}" onchange="updateFooter('${type}', 'siteName', this.value)">
                    </div>
                    <div class="form-field">
                        <label>站点副标（红色文字，CN页面显示CN，其他显示ASIA）</label>
                        <input type="text" value="${data.siteSub}" onchange="updateFooter('${type}', 'siteSub', this.value)">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field">
                        <label>联系文字（留空不显示）</label>
                        <input type="text" value="${data.contactText}" onchange="updateFooter('${type}', 'contactText', this.value)">
                    </div>
                    <div class="form-field">
                        <label>邮箱地址（留空不显示，可点击发信）</label>
                        <input type="text" value="${data.email}" onchange="updateFooter('${type}', 'email', this.value)">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field">
                        <label>电话（留空不显示，可点击拨打）</label>
                        <input type="text" value="${data.phone}" onchange="updateFooter('${type}', 'phone', this.value)">
                    </div>
                    <div class="form-field">
                        <label>地址（留空不显示，支持换行用\n）</label>
                        <textarea rows="3" onchange="updateFooter('${type}', 'address', this.value)">${data.address}</textarea>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-field">
                        <label>版权文字</label>
                        <input type="text" value="${data.copyright}" onchange="updateFooter('${type}', 'copyright', this.value)">
                    </div>
                    <div class="form-field">
                        <label>制作单位Logo路径</label>
                        <input type="text" value="${data.producerLogo}" onchange="updateFooter('${type}', 'producerLogo', this.value)">
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <div style="font-size: 16px; color: #8b0000; margin-bottom: 15px; border-bottom: 2px solid #8b0000; padding-bottom: 10px;">
                        社交媒体（最多10个，链接留空时图标显示但不可点击）
                    </div>
                    <div id="social-list-${type}">
                        ${renderSocialList(type, data.social)}
                    </div>
                    <button class="btn btn-small btn-secondary" onclick="addSocial('${type}')" style="margin-top: 10px;">+ 添加社交媒体</button>
                </div>
            `;
        }

        function renderSocialList(type, socialList) {
            let html = '';
            const iconOptions = [
                {value: 'facebook', label: 'Facebook'},
                {value: 'instagram', label: 'Instagram'},
                {value: 'youtube', label: 'YouTube'},
                {value: 'x', label: 'X (Twitter)'},
                {value: 'weibo', label: '微博'},
                {value: 'wechat', label: '微信'},
                {value: 'xiaohongshu', label: '小红书'},
                {value: 'miniprogram', label: '小程序'}
            ];

            socialList.forEach((item, index) => {
                html += `
                    <div style="background: #e0e0e0; padding: 15px; margin-bottom: 10px; border-radius: 5px; display: grid; grid-template-columns: 40px 1fr 1fr 1fr 40px; gap: 10px; align-items: center;">
                        <input type="checkbox" ${item.enabled !== false ? 'checked' : ''} onchange="updateSocial('${type}', ${index}, 'enabled', this.checked)" title="启用">
                        <input type="text" placeholder="显示名称" value="${item.name}" onchange="updateSocial('${type}', ${index}, 'name', this.value)">
                        <select onchange="updateSocial('${type}', ${index}, 'icon', this.value)">
                            ${iconOptions.map(opt => `<option value="${opt.value}" ${item.icon === opt.value ? 'selected' : ''}>${opt.label}</option>`).join('')}
                        </select>
                        <input type="text" placeholder="链接地址（留空不可点击）" value="${item.link}" onchange="updateSocial('${type}', ${index}, 'link', this.value)">
                        <button class="btn btn-small btn-danger" onclick="deleteSocial('${type}', ${index})">×</button>
                    </div>
                `;
            });

            return html;
        }

        function updateFooter(type, field, value) {
            const dataKey = type === 'global' ? 'footerGlobal' : 'footerCN';
            appData[dataKey][field] = value;
            markUnsynced('footer');
        }

        function addSocial(type) {
            const dataKey = type === 'global' ? 'footerGlobal' : 'footerCN';
            if (appData[dataKey].social.length >= 10) {
                showToast('最多10个社交媒体');
                return;
            }
            appData[dataKey].social.push({
                name: '',
                icon: 'facebook',
                link: '',
                enabled: true
            });
            renderFooterForm(type);
            markUnsynced('footer');
        }

        function updateSocial(type, index, field, value) {
            const dataKey = type === 'global' ? 'footerGlobal' : 'footerCN';
            appData[dataKey].social[index][field] = value;
            markUnsynced('footer');
        }

        function deleteSocial(type, index) {
            const dataKey = type === 'global' ? 'footerGlobal' : 'footerCN';
            appData[dataKey].social.splice(index, 1);
            renderFooterForm(type);
            markUnsynced('footer');
        }

        // ===== 同步功能 =====
        function markUnsynced(type) {
            const statusEl = document.getElementById(type + 'SyncStatus');
            if (statusEl) {
                statusEl.className = 'sync-status unsynced';
                statusEl.innerHTML = '<span>●</span> 未同步';
            }
        }

        function markSynced(type) {
            const statusEl = document.getElementById(type + 'SyncStatus');
            if (statusEl) {
                statusEl.className = 'sync-status synced';
                statusEl.innerHTML = '<span>●</span> 已同步';
            }
        }

        // 同步到GitHub（实际实现需要GitHub API）
        function syncToGitHub(type) {
            showToast('正在生成JSON文件，请下载后上传到GitHub...');

            const filesToDownload = [];

            if (type === 'banners') {
                filesToDownload.push({
                    name: 'banners.json',
                    data: appData.banners
                });
            } else if (type === 'posters') {
                filesToDownload.push(
                    {name: 'index-posters.json', data: appData.indexPosters},
                    {name: 'cn-posters.json', data: appData.cnPosters},
                    {name: 'events-posters.json', data: appData.eventsPosters}
                );
            } else if (type === 'footer') {
                filesToDownload.push(
                    {name: 'footer-global.json', data: appData.footerGlobal},
                    {name: 'footer-cn.json', data: appData.footerCN}
                );
            }

            // 下载文件
            filesToDownload.forEach(file => {
                downloadJSON(file.name, file.data);
            });

            showToast('JSON文件已下载，请上传到GitHub的content文件夹');
            markSynced(type);
        }

        function downloadJSON(filename, data) {
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // 提示
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
